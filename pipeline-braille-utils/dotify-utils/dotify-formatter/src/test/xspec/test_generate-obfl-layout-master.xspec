<?xml version="1.0" encoding="UTF-8"?>
<x:description xmlns:x="http://www.jenitennison.com/xslt/xspec"
               xmlns:css="http://www.daisy.org/ns/pipeline/braille-css"
               xmlns:obfl="http://www.daisy.org/ns/2011/obfl"
               stylesheet="../../main/resources/xml/generate-obfl-layout-master.xsl">
  
  <x:scenario label="test_01">
    <x:call function="obfl:generate-layout-master">
      <x:param select="''"/>
      <x:param select="'x'"/>
    </x:call>
    <x:expect label="layout-master">
      <layout-master xmlns="http://www.daisy.org/ns/2011/obfl" name="x" page-width="40" page-height="25" duplex="true" page-number-variable="page">
        <default-template>
          <header/>
          <footer/>
        </default-template>
      </layout-master>
    </x:expect>
  </x:scenario>
  
  <x:scenario label="test_02">
    <x:call function="obfl:generate-layout-master">
      <x:param select="'size: 15 15;
                        @top-right { content: counter(page, lower-roman) }
                        @bottom-center { content: &quot;footer&quot; }'"/>
      <x:param select="'x'"/>
    </x:call>
    <x:expect label="layout-master">
      <layout-master xmlns="http://www.daisy.org/ns/2011/obfl" name="x" page-width="15" page-height="15" duplex="true" page-number-variable="page">
        <default-template>
          <header>
            <field>
              <string value=""/>
            </field>
            <field>
              <string value=""/>
            </field>
            <field>
              <current-page style="lower-roman"/>
            </field>
          </header>
          <footer>
            <field>
              <string value=""/>
            </field>
            <field>
              <string value="footer"/>
            </field>
            <field>
              <string value=""/>
            </field>
          </footer>
        </default-template>
      </layout-master>
    </x:expect>
  </x:scenario>
  
  <x:scenario label="test_03">
    <x:call function="obfl:generate-layout-master">
      <x:param select="'{ size: 15 15 }
                        :right { margin-top: 1; @top-right { content: counter(page) }}
                        :left { margin-top: 2; @top-left { content: counter(page) }}'"/>
      <x:param select="'x'"/>
    </x:call>
    <x:expect label="layout-master">
      <layout-master xmlns="http://www.daisy.org/ns/2011/obfl" name="x" page-width="15" page-height="15" duplex="true" page-number-variable="page">
        <template use-when="(= (% $page 2) 1)">
          <header>
            <field>
              <string value=""/>
            </field>
            <field>
              <string value=""/>
            </field>
            <field>
              <current-page style="default"/>
            </field>
          </header>
          <footer/>
        </template>
        <template use-when="(= (% $page 2) 0)">
          <header>
            <field>
              <current-page style="default"/>
            </field>
            <field>
              <string value=""/>
            </field>
            <field>
              <string value=""/>
            </field>
          </header>
          <header>
            <field>
              <string value=""/>
            </field>
            <field>
              <string value=""/>
            </field>
            <field>
              <string value=""/>
            </field>
          </header>
          <footer/>
        </template>
        <default-template>
          <header/>
          <footer/>
        </default-template>
      </layout-master>
    </x:expect>
  </x:scenario>
  
  <x:scenario label="test_04">
    <x:call function="obfl:generate-layout-master">
      <x:param select="'size: 15 5; margin-bottom: 1;'"/>
      <x:param select="'x'"/>
    </x:call>
    <x:expect label="layout-master">
      <layout-master xmlns="http://www.daisy.org/ns/2011/obfl" name="x" page-width="15" page-height="5" duplex="true" page-number-variable="page">
        <default-template>
          <header/>
          <footer>
            <field>
              <string value=""/>
            </field>
            <field>
              <string value=""/>
            </field>
            <field>
              <string value=""/>
            </field>
          </footer>
        </default-template>
      </layout-master>
    </x:expect>
  </x:scenario>
  
  <x:scenario label="test_05">
    <x:call function="obfl:generate-layout-master">
      <x:param select="'size: 15 5; margin-bottom: 2;'"/>
      <x:param select="'x'"/>
    </x:call>
    <x:expect label="layout-master">
      <layout-master xmlns="http://www.daisy.org/ns/2011/obfl" name="x" page-width="15" page-height="5" duplex="true" page-number-variable="page">
        <default-template>
          <header/>
          <footer>
            <field>
              <string value=""/>
            </field>
            <field>
              <string value=""/>
            </field>
            <field>
              <string value=""/>
            </field>
          </footer>
          <footer>
            <field>
              <string value=""/>
            </field>
            <field>
              <string value=""/>
            </field>
            <field>
              <string value=""/>
            </field>
          </footer>
        </default-template>
      </layout-master>
    </x:expect>
  </x:scenario>
  
  <x:scenario label="test_06">
    <x:call function="obfl:generate-layout-master">
      <x:param select="'@bottom-left { content: &quot;⠆&quot; } size: 15 5; margin-bottom: 1;'"/>
      <x:param select="'x'"/>
    </x:call>
    <x:expect label="layout-master">
      <layout-master xmlns="http://www.daisy.org/ns/2011/obfl" name="x" page-width="15" page-height="5" duplex="true" page-number-variable="page">
        <default-template>
          <header/>
          <footer>
            <field>
              <string value="⠆"/>
            </field>
            <field>
              <string value=""/>
            </field>
            <field>
              <string value=""/>
            </field>
          </footer>
        </default-template>
      </layout-master>
    </x:expect>
  </x:scenario>
  
  <x:scenario label="test_07">
    <x:call function="obfl:generate-layout-master">
      <x:param select="'@bottom-left { content: &quot;⠆&quot; } size: 15 5; margin-bottom: 2;'"/>
      <x:param select="'x'"/>
    </x:call>
    <x:expect label="layout-master">
      <layout-master xmlns="http://www.daisy.org/ns/2011/obfl" name="x" page-width="15" page-height="5" duplex="true" page-number-variable="page">
        <default-template>
          <header/>
          <footer>
            <field>
              <string value=""/>
            </field>
            <field>
              <string value=""/>
            </field>
            <field>
              <string value=""/>
            </field>
          </footer>
          <footer>
            <field>
              <string value="⠆"/>
            </field>
            <field>
              <string value=""/>
            </field>
            <field>
              <string value=""/>
            </field>
          </footer>
        </default-template>
      </layout-master>
    </x:expect>
  </x:scenario>
  
  <x:scenario label="test_08">
    <x:call function="obfl:generate-layout-master">
      <x:param select="'@bottom-left { content: &quot;⠆&#x0a;⠆⠆&quot;; white-space: pre-wrap; } size: 15 5; margin-bottom: 2;'"/>
      <x:param select="'x'"/>
    </x:call>
    <x:expect label="layout-master">
      <layout-master xmlns="http://www.daisy.org/ns/2011/obfl" name="x" page-width="15" page-height="5" duplex="true" page-number-variable="page">
        <default-template>
          <header/>
          <footer>
            <field>
              <string value="⠆"/>
            </field>
            <field>
              <string value=""/>
            </field>
            <field>
              <string value=""/>
            </field>
          </footer>
          <footer>
            <field>
              <string value="⠆⠆"/>
            </field>
            <field>
              <string value=""/>
            </field>
            <field>
              <string value=""/>
            </field>
          </footer>
        </default-template>
      </layout-master>
    </x:expect>
  </x:scenario>
  
  <x:scenario label="test_09">
    <x:call function="obfl:generate-layout-master">
      <x:param select="'@bottom-left { content: &quot;⠆&#x0a;⠆⠆&quot;; white-space: pre-wrap; } size: 15 5; margin-bottom: 1;'"/>
      <x:param select="'x'"/>
    </x:call>
    <x:expect label="layout-master">
      <layout-master xmlns="http://www.daisy.org/ns/2011/obfl" name="x" page-width="15" page-height="5" duplex="true" page-number-variable="page">
        <default-template>
          <header/>
          <footer>
            <field>
              <string value="⠆"/>
            </field>
            <field>
              <string value=""/>
            </field>
            <field>
              <string value=""/>
            </field>
          </footer>
          <footer>
            <field>
              <string value="⠆⠆"/>
            </field>
            <field>
              <string value=""/>
            </field>
            <field>
              <string value=""/>
            </field>
          </footer>
        </default-template>
      </layout-master>
    </x:expect>
  </x:scenario>
  
</x:description>
